<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>LÖVE WebGL</title>
    <style>
        body {
            background-color: #000;
            color: #fff;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevent scrollbars */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: sans-serif;
        }
        canvas {
            border: 0px none;
            background-color: black;
        }
        #loading-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2em;
        }
    </style>
</head>
<body>
    <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
    <div id="loading-indicator">Loading...</div>

    <script type="text/javascript" src="love.js"></script>
    <script type="text/javascript">
        var gameRunning = false;
        var Module = {
            canvas: (function() { return document.getElementById('canvas'); })(),
            arguments: ['/game.love'], // Or the main game directory if not using a .love file
            print: (function() {
                var element = document.getElementById('output');
                if (element) element.value = ''; // Clear browser cache
                return function(text) {
                    if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
                    console.log(text);
                    if (element) {
                        element.value += text + "\n";
                        element.scrollTop = element.scrollHeight; // Auto-scroll
                    }
                };
            })(),
            printErr: function(text) {
                if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
                console.error(text);
            },
            onRuntimeInitialized: function() {
                console.log("LÖVE runtime initialized.");
                // Hide loading indicator
                var loadingIndicator = document.getElementById('loading-indicator');
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'none';
                }
                gameRunning = true;
            },
            setStatus: function(text) {
                if (!Module.setStatus.last) Module.setStatus.last = { time: Date.now(), text: '' };
                if (text === Module.setStatus.text) return;
                // Only show status updates if the game hasn't started running yet
                if (!gameRunning) {
                    var loadingIndicator = document.getElementById('loading-indicator');
                    if (loadingIndicator) {
                        loadingIndicator.textContent = text || 'Loading...';
                    }
                    console.log("Status: " + text);
                }
            },
            totalDependencies: 0,
            monitorRunDependencies: function(left) {
                this.totalDependencies = Math.max(this.totalDependencies, left);
                Module.setStatus(left ? 'Preparing... (' + (this.totalDependencies - left) + '/' + this.totalDependencies + ')' : 'All downloads complete.');
            }
        };

        // Initial status message
        Module.setStatus('Downloading...');

        // Graceful shutdown
        window.onerror = function() {
            Module.setStatus('Exception thrown, see JavaScript console');
            Module.setStatus = function(text) {
                if (text) Module.printErr('[post-exception status] ' + text);
            };
        };

        // If you want to load a specific .love file, make sure it's accessible
        // and the path in `arguments` is correct.
        // For example, if your game.love is in a 'game' subfolder:
        // arguments: ['/game/game.love'],

        // It's also common to package all game assets into a single .js file
        // along with the engine, which simplifies distribution. The love.js CLI
        // tool helps with this. If you have a pre-packaged game.js, you'd include
        // <script type="text/javascript" src="game.js"></script>
        // and the Module.arguments might not be needed or would be different.

    </script>
    <!-- This will be generated by the love.js packaging tool -->
    <!-- <script async type="text/javascript" src="game.js"></script> -->
</body>
</html>
